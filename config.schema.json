{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$ref": "#/definitions/ConfigFile",
    "definitions": {
        "ConfigFile": {
            "type": "object",
            "properties": {
                "$schema": {
                    "type": "string",
                    "description": "Pointer to the schema against which this document should be validated (Schema URL/path)."
                },
                "globals": {
                    "$ref": "#/definitions/ConfigFileGlobals",
                    "description": "Global configurations"
                },
                "jobs": {
                    "type": "array",
                    "items": {
                        "anyOf": [
                            {
                                "$ref": "#/definitions/Job"
                            },
                            {
                                "$ref": "#/definitions/Job%3CRsync.Options%3E"
                            }
                        ]
                    },
                    "description": "Backup jobs"
                }
            },
            "required": [
                "globals",
                "jobs"
            ],
            "additionalProperties": false
        },
        "ConfigFileGlobals": {
            "type": "object",
            "properties": {
                "variables": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Config.Globals.Variable"
                    },
                    "description": "Global variables"
                }
            },
            "required": [
                "variables"
            ],
            "additionalProperties": false
        },
        "Config.Globals.Variable": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Global variable name"
                },
                "description": {
                    "type": "string",
                    "description": "Global variable description"
                },
                "value": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    ],
                    "description": "Global variable value(s)"
                }
            },
            "required": [
                "name",
                "value"
            ],
            "additionalProperties": false
        },
        "Job": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Job name"
                },
                "description": {
                    "type": "string",
                    "description": "Job description"
                },
                "data": {
                    "$ref": "#/definitions/Job.DefaultData",
                    "description": "Job data"
                },
                "instructions": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Instruction%3Cany%2Cany%3E"
                    },
                    "description": "Job instructions"
                }
            },
            "required": [
                "name",
                "data",
                "instructions"
            ],
            "additionalProperties": false
        },
        "Job.DefaultData": {
            "type": "object",
            "properties": {
                "backupDirs": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "The backup directories"
                },
                "sourceDir": {
                    "type": "string",
                    "description": "The source directory"
                },
                "dryRun": {
                    "type": "boolean",
                    "description": "Run the job without actually performing any create/write/copy/... actions"
                }
            },
            "required": [
                "backupDirs",
                "sourceDir"
            ],
            "additionalProperties": false
        },
        "Instruction<any,any>": {
            "type": "object",
            "properties": {
                "plugin": {
                    "anyOf": [
                        {
                            "$ref": "#/definitions/OfficiallySupportedPluginList"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "Plugin name"
                },
                "command": {
                    "description": "Plugin command"
                },
                "options": {
                    "description": "Plugin command options"
                }
            },
            "required": [
                "plugin",
                "command",
                "options"
            ],
            "additionalProperties": false
        },
        "OfficiallySupportedPluginList": {
            "anyOf": [
                {
                    "$ref": "#/definitions/Rsync.PluginName"
                },
                {
                    "$ref": "#/definitions/AbruneggOneDrive.PluginName"
                },
                {
                    "$ref": "#/definitions/Git.PluginName"
                },
                {
                    "$ref": "#/definitions/GitHub.PluginName"
                },
                {
                    "$ref": "#/definitions/GitLab.PluginName"
                },
                {
                    "$ref": "#/definitions/Grive.PluginName"
                },
                {
                    "$ref": "#/definitions/CopyFiles.PluginName"
                },
                {
                    "$ref": "#/definitions/Pacman.PluginName"
                },
                {
                    "type": "string",
                    "const": "abc-die-katze"
                }
            ]
        },
        "Rsync.PluginName": {
            "type": "string",
            "const": "Rsync"
        },
        "AbruneggOneDrive.PluginName": {
            "type": "string",
            "const": "AbruneggOneDrive"
        },
        "Git.PluginName": {
            "type": "string",
            "const": "Git"
        },
        "GitHub.PluginName": {
            "type": "string",
            "const": "GitHub"
        },
        "GitLab.PluginName": {
            "type": "string",
            "const": "GitLab"
        },
        "Grive.PluginName": {
            "type": "string",
            "const": "Grive"
        },
        "CopyFiles.PluginName": {
            "type": "string",
            "const": "CopyFiles"
        },
        "Pacman.PluginName": {
            "type": "string",
            "const": "Pacman"
        },
        "Job<Rsync.Options>": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Job name"
                },
                "description": {
                    "type": "string",
                    "description": "Job description"
                },
                "data": {
                    "$ref": "#/definitions/Rsync.Options",
                    "description": "Job data"
                },
                "instructions": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/Instruction%3Cany%2Cany%3E"
                    },
                    "description": "Job instructions"
                }
            },
            "required": [
                "name",
                "data",
                "instructions"
            ],
            "additionalProperties": false
        },
        "Rsync.Options": {
            "type": "object",
            "properties": {
                "sourceDir": {
                    "type": "string",
                    "description": "Directory that should be synced"
                },
                "backupDirs": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "Directory backup locations"
                },
                "verbose": {
                    "type": "boolean",
                    "description": "Option: \"-v\"/\"--verbose\"    to get a visual progress bar"
                },
                "recursive": {
                    "type": "boolean",
                    "description": "Option: \"-r\"/\"--recursive\"  to recurse into directories"
                },
                "archive": {
                    "type": "boolean",
                    "description": "Option: \"-a\"/\"--archive\"    to preserve the date, ownership, permissions, groups"
                },
                "delete": {
                    "type": "boolean",
                    "description": "Option: \"--delete\"          to delete deleted files in destination directory"
                },
                "deleteExcluded": {
                    "type": "boolean",
                    "description": "Option: \"--delete-excluded\" to also delete excluded files in destination directory"
                },
                "excludeFrom": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "Option: \"--exclude-from 'rsync_exclude_list.txt'\" to ignore certain files from getting a backup"
                }
            },
            "required": [
                "sourceDir",
                "backupDirs"
            ],
            "additionalProperties": false
        }
    }
}